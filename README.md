# FinancialApp

____

## Описание

Приложение представляет собой калькулятор для расчета усредненной стоимости (в долларах) для прогнозирования потенциальной доходности при вкладе денег в акции или ценные бумаги. Данные для расчетов запрашиваются из Restful API [ALPHA VANTAGE](https://www.alphavantage.co), которое предоставляет данные американского фондового рынка.

Приложение создано создано с использованием реактивной архитектуры, где состояния и данные отслеживаются при помощи фреймворка __Combine__.

____

## Тесты

Так как в проекте есть методы для расчетов было принято решение вынести их в отдельный сервис для удобства тестирования. Данный сервисный слой протестирован при 4 разных сценариях:

+ Кейс, при котором актив приносит доход и ежемемясячно акции докупаются на сумму не равную 0.
+ Кейс, при котором актив приносит доход, но акции ежемесячно не докупаются.
+ Кейс, при котором актив убыточный и акции ежемесячно допупались.
+ Кейс, при котором акти убыточный и акции не докупались.

Реализацию тестов можно подробнее увидеть __[здесь](https://github.com/Olegajaro/FinancialApp/blob/main/FinancialAppTests/DCAServiceTests.swift)__.

____

## Разделы проекта и их особенности

### Start/Search screen
+ Стартовый экран представляет собой пустое вью с __UISearchController__.
+ При вводе в поиск запроса появляется __tableView__ c результатами.
+ Данные можно искать как по индексу определенной компании так и по ее названию.
+ Результат поиска после ввода появляется с небольшой задержкой для более приятного пользовательского опыта.
+ По нажатию на нужную ячейку реализован переход на экран, который представляет собой Калькулятор для расчета доходности от вклада ваших средств в данную компанию.

![startScreen](/Screenshots/startScreen.png) ![searchScreen](/Screenshots/SearchScreen.png) 

### Calculator screen
+ Calculator представляет собой __tableView__ c двумя статическими ячейками.
+ В верхей ячейка служит для отображения результата расчета доходности от вклада.
+ Нижняя ячейка состоит из текстовых полей для ввода нужных данных.
  + Начальная сумма вклада
  + Дополнительная сумма, на какую вы будете докупать акции данной компании ежемесячно (может быть 0)
  + Текстовое поле для выбора даты (месяц/год) с которой вы бы хотели рассчитать потенциальную доходность. 
+ Для текстовых полей, где надо вводить сумму используется цифровая клавиатура с дополнительной кнопкой Done для подтверждения.
+ По нажатию на текствое поле для выбора даты реализован переход на представление Date Selection, где можно выбрать нужную дату.
+ Так же для удобства под текстовым полем есть слайдер, с помощью которого так же можно выбирать начальную дату для вклада.

![calculatorWithDCA](/Screenshots/CalculatorWithDCA.png)  ![sliderAction](https://media.giphy.com/media/K1OS0kS8VdmC48UYYm/giphy.gif) ![calculatorNotDCA](/Screenshots/CalculatorLosingResult.png)

### Date Selection
+ Представление Date selection позволяет выбрать начальную дату для вклада и передать информацию обратно на экран Calculator для расчета.
+ Чтобы не запутаться и видеть месяц, который был выбран, он отмечается галочкой.
![dateSelection](/Screenshots/DateSelectionScreen.png)

____

## Технологии

+ __Swift 5.5 (iOS 15 +)__
+ __UIKit__
+ __MVC__
+ __StoryBoard__
+ __Combine__
+ __Extensions__
+ __MBProgressHUD__

## Особенность API

Особенность данной API в том, что по одному ключу можно получить 5 запросов в минуту. Для более частых запросов в проекте есть 3 ключа, которые с помощью вычисляемогого свойства подсталяются рандомно. Ключы для данной API получить легко, достатчно ввести любое имя компании и рандомно сгенерированный email. 

### Сторонние фреймворки

В проекте используется __MBProgressHUD__ для реализации индикатора загрузки при запросе данных. Для интерграции использовался cocapods, чтобы установить открыть в терминале директорию с проектом и ввести команду `pod install`.











